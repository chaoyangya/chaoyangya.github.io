var searchFunc=function(e,l,i){var n="<i id='local-search-close'>x</i>";$.ajax({url:e,dataType:"xml",success:function(e){var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get();var r=document.getElementById(l);var a=document.getElementById(i);r.addEventListener("input",function(){var v='<ul class="search-result-list">';var m=this.value.trim().toLowerCase().split(/[\s\-]+/);a.innerHTML="";if(this.value.trim().length<=0){return}t.forEach(function(e){var r=true;var t=[];if(!e.title||e.title.trim()===""){e.title="Untitled"}var a=e.title.trim().toLowerCase();var l=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase();var i=e.url;var n=-1;var s=-1;var c=-1;if(l!==""){m.forEach(function(e,t){n=a.indexOf(e);s=l.indexOf(e);if(n<0&&s<0){r=false}else{if(s<0){s=0}if(t==0){c=s}}})}else{r=false}if(r){v+="<li><a href='"+i+"' class='search-result-title'>"+a+"</a>";var u=e.content.trim().replace(/<[^>]+>/g,"");if(c>=0){var o=c-20;var f=c+80;if(o<0){o=0}if(o==0){f=100}if(f>u.length){f=u.length}var h=u.substr(o,f);m.forEach(function(e){var t=new RegExp(e,"gi");h=h.replace(t,'<em class="search-keyword">'+e+"</em>")});v+='<p class="search-result">'+h+"...</p>"}v+="</li>"}});v+="</ul>";if(v.indexOf("<li>")===-1){return a.innerHTML=n+"<ul><span class='local-search-empty'>No search results<span></ul>"}a.innerHTML=n+v})}});$(document).on("click","#local-search-close",function(){$("#local-search-input").val("");$("#local-search-result").html("")})};