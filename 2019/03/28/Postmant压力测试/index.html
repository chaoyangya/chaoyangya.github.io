<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="author" content="cywhat"><title>Postmant压力测试 | cywhat&#39;s 个人博客</title><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><script src="/js/script.js"></script><script src="/js/tocbot.min.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="wrapper"><header><nav class="navbar"><div class="container"><div class="navbar-header header-logo"><a href="/">cywhat&#39;s Blog</a></div><div class="menu navbar-right"><a class="menu-item" href="/archives">帖子</a> <a class="menu-item" href="/category">分类</a> <a class="menu-item" href="/tag">标签</a> <a class="menu-item" href="/about">关于</a> <input id="switch_default" type="checkbox" class="switch_default"> <label for="switch_default" class="toggleBtn"></label></div></div></nav><nav class="navbar-mobile" id="nav-mobile"><div class="container"><div class="navbar-header"><div><a href="/">cywhat&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a></div><div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div></div><div class="menu" id="mobile-menu"><a class="menu-item" href="/archives">帖子</a> <a class="menu-item" href="/category">分类</a> <a class="menu-item" href="/tag">标签</a> <a class="menu-item" href="/about">关于</a></div></div></nav></header><script>var mobileBtn=function(){var e=document.getElementsByClassName("menu-toggle")[0],t=document.getElementById("mobile-menu");e.classList.contains("active")?(e.classList.remove("active"),t.classList.remove("active")):(e.classList.add("active"),t.classList.add("active"))}</script><div class="main"><div class="container"><article class="post-wrap"><header class="post-header"><h1 class="post-title">Postmant压力测试</h1><div class="post-meta">Author: <a itemprop="author" rel="author" href="/">cywhat</a> <span class="post-time">Date: <a href="#">三月 28, 2019&nbsp;&nbsp;18:16:00</a> </span><span class="post-category">Category: <a href="/categories/Postman/">Postman</a></span></div></header><div class="post-content"><p>Postman请自行下载</p><p>下面是在网上随便抓了一个请求地址来做演示，把请求地址填入地址栏，此请求为GET请求。点击Send发送请求，请求结果将会在下方显示出来。每次的请求历史数据，会被记录下来，但是经常使用的请求，还是保存一下，这么每次用的时候，选择就行了，及其方便。</p><p>另外，最好创建一个账号，这样数据将会永久保存下来，不至于重装了系统或者换了台电脑数据都没了的尴尬。<br><img src="https://img-blog.csdnimg.cn/img_convert/3fea11cd00cc15c65ffa0d8b20d86677.png"></p><p>保存的时候起个好听的名字<br><img src="https://img-blog.csdnimg.cn/img_convert/93990e6ee3e367ae2cf87a9116a26bdd.png"></p><p>Header会传输一些我们需要的一些通用的数据，定义好之后，每个接口几乎都是一样的。所以，把这些数据进行预置，这样就不用每新建一个请求，都要重复的添加Header了。</p><p>请求的时候，会把请求状态，请求的时间，以及返回的数据大小返回回来。这样一目了然。最常见的status就是200表示成功，400表示未找到资源。500开头的基本都是服务端异常等等。我之前写了一篇很详细的状态说明，请参见<a href="https://cywhat.cn/2019/03/07/http%E5%90%84%E4%B8%AAstatus-code%E4%BB%A3%E8%A1%A8%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D/">HTTP状态码大全</a><br><img src="https://img-blog.csdnimg.cn/img_convert/21001692b3f24989dd93c7370f6c0fe9.png"></p><p><img src="https://img-blog.csdnimg.cn/img_convert/1ee94aec5573735267fb282f90377d93.png"></p><p>点击params可以把url里的参数以列表的形式展现出来，方便编写<br><img src="https://img-blog.csdnimg.cn/img_convert/ea54d62217323e9b20b0d03b28306f3e.png"></p><p>还有一种更方便的编辑方式，点击Bulk Edit ，直接修改字符串的方式修改，而且可以复制粘贴，方便迁移到其它地方。而且这个功能在其它参数编辑的地方都适用。<br><img src="https://img-blog.csdnimg.cn/img_convert/ce04535d4f95cd16f1c858a42a7724b3.png"></p><p>我们来看看如何发送POST接口<br><img src="https://img-blog.csdnimg.cn/img_convert/50e16c6c51ccd922142639c8bc06e7c9.png"></p><p>form-data、x-www-form-urlencoded、raw、binary的区别</p><p>x-www-form-urlencoded</p><p>当用户通过form表单提交数据的时候，例如：</p><pre><code>&lt;form method=&quot;post&quot;action=&quot;http://api.test.com/user&quot; &gt;
 &lt;inputtype=&quot;text&quot; name=&quot;name&quot;&gt;
 &lt;inputtype=&quot;text&quot; name=&quot;age&quot;&gt;
&lt;/form&gt;
</code></pre><p>提交时会向服务器端发出这样的数据（已经去除部分不相关的头信息），数据如下：</p><pre><code>POST /user HTTP/1.1
Content-Type:application/x-www-form-urlencoded
Accept-Encoding: gzip, deflate
Host: api.test.com
Content-Length: 21
Connection: Keep-Alive
Cache-Control: no-cache
name=互扯程序&amp;age=18
</code></pre><p>它的Content-Type是application/x-www-form-urlencoded，这表示消息内容会经过URL编码</p><p>form-data</p><p>当需要上传文件（可以上传多个文件），并且有参数同时传递的时候，选择这个选项可以上传文件。</p><p>举个例子</p><pre><code>&lt;form method=&quot;post&quot;action=&quot;http://api.test.com/user/upload.do&quot; enctype=”multipart/form-data”&gt;
&lt;inputtype=&quot;text&quot; name=&quot;desc&quot;&gt;
&lt;inputtype=&quot;file&quot; name=&quot;pic&quot;&gt;
&lt;/form&gt;
</code></pre><p>浏览器将会发送以下数据：</p><pre><code>POST /user/upload.do HTTP/1.1
Accept-Language: zh-cn,zh;q=0.5
Accept-Charset: GBK,utf-8;q=0.7,*;q=0.7
Connection: keep-alive
Content-Length: 60408
Content-Type:multipart/form-data; boundary=ZnGpDtePMx0KrHh_G0X99Yef9r8JZsRJSXC
Host: api.test.com
</code></pre><p>我们看到Content-Type:multipart/form-data;</p><p>当需要上传数据的时候，必须设置enctype=“multipart/form-data”，</p><p>enctype：规定在发送到服务器之前应该如何对表单数据进行编码，他有如下的三个值：</p><ol><li><p>application/x-www-form-urlencoded。默认的编码方式。所有字符都会进行编码（空格转换为 “+” 加号，特殊符号转换为 ASCII HEX 值）。</p></li><li><p>multipart/form-data 。 指定传输数据为二进制类型，比如图片、mp3、文件。 不对字符编码。在使用包含文件上传控件的表单时，必须使用该值。</p></li><li><p>text/plain。纯文体的传输。空格转换为 “+” 加号，但不对特殊字符编码。</p></li></ol><p>其实form表单在你不写enctype属性时，也默认为其添加了enctype属性值，默认值是enctype=”application/x- www-form-urlencoded”，所以上面注册用户的时候虽然没写，其实默认加上了。</p><p>raw</p><p>当需要给服务端传递json，xml等数据的时候选择raw，当选择了raw的时候，header里会自动加上</p><p>Content-Type: application/json</p><p>例如：</p><pre><code>$.ajax(&#123;
    url:&quot;/user/&quot;,
    data:JSON.stringify(user),
     method:&quot;POST&quot;,
     contentType:&quot;application/json&quot;,
     success: function(res)&#123;
        console.info(&quot;添加成功&quot;)
    &#125;
&#125;);
</code></pre><p><img src="https://img-blog.csdnimg.cn/img_convert/bb7480fa9fc9f24c23f6d9be8029e579.png"></p><p>binary（注意了这个格式这里可以上传你的压测数据文件）</p><p>PS：压测文件可以是csv格式跟json格式的</p><p>这里还可以在Pre-requestScript”中设置环境变量 “username”, “password”,在Body 中选取”form-data” 格式，输入所需的key-value, value即为变量, 。</p><pre><code>postman.setEnvironmentVariable(&quot;username&quot;,data[&quot;username&quot;]);
postman.setEnvironmentVariable(&quot;password&quot;,data[&quot;password&quot;]);
</code></pre><p>然后再Tests里添加断言</p><pre><code>tests[&quot;Status code is 200&quot;] = responseCode.code === 200;
tests[&quot;Response time is less than 10000ms&quot;] = responseTime &lt; 10000;
console.log(responseTime);
</code></pre><p>只能上传一个文件，也不能添加参数。<br><img src="https://img-blog.csdnimg.cn/img_convert/6c381a1e9ae7b4a4c0c44e6e95059f97.png"></p><p>压力测试</p><p>当你需要验证你的接口的抗压能力的时候，可以点击Runner，进行压力测试<br><img src="https://img-blog.csdnimg.cn/img_convert/c0d4f4547adb0e3cdc15e54704abf20a.png"></p><p>注意：压力测试只能以文件夹的方式执行多个接口，不能单独执行，如果想要测试某一个接口，就创一个文件夹，这个文件夹里只有一个要测试的接口。<br><img src="https://img-blog.csdnimg.cn/img_convert/59da6db4f53379ce7f7d72a91ff303c1.png"></p><p>点击执行，并发执行了500次。每次再100毫秒内返回结果。<br><img src="https://img-blog.csdnimg.cn/img_convert/d5a05c7b0316c18fd005f72ed4a16f63.png"></p></div><section class="post-copyright"><p class="copyright-item"><span>Author:</span> <span>cywhat</span></p><p class="copyright-item"><span>Slogan:</span> <span>不 要 温 顺 的 走 进 那 个 良 夜</span></p></section><section class="post-tags"><div><span>Tag(s):</span> <span class="tag"><a href="/tags/Postman/"># Postman</a></span></div><div><a href="javascript:window.history.back();">back</a> <span>· </span><a href="/">home</a></div></section><section class="post-nav"><a class="prev" rel="prev" href="/2019/10/23/Git%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/">Git基础命令</a> <a class="next" rel="next" href="/2019/03/07/HTTP%E5%90%84%E4%B8%AAstatus-code%E4%BB%A3%E8%A1%A8%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D/">HTTP各个status code代表什么意思</a></section></article></div></div><footer id="footer" class="footer"><div class="copyright"><span>cywhat | Copyright © 2018 - 2021 All Rights Reserved & <a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank">京ICP备20011839号-2</a></span></div></footer></div></body></html>